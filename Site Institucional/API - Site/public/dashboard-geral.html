<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/dashboards-geral.css" />
    <link
      rel="stylesheet"
      href="assets/post-no-bills-jaffna-cufonfonts-webfont/style.css"
    />
  </head>

  <body>
    <div class="menu">
      <div class="box-nav-logo">
        <a href="index.html">
          <h1><img src="assets/img/logo.png" />Safe <span>Therm</span></h1>
        </a>
      </div>
      <div class="icon_barra">
        <a href="dashboard-tela-funcionarios.html">
          <img src="assets/img/icon_listaFunc.svg" alt="" />
          FUNCIONÁRIOS
        </a>
      </div>
      <div class="icon_barra">
        <a href="">
          <img src="assets/img/icon_veiculo.svg" alt="" />
          VEÍCULOS
        </a>
      </div>
      <div class="icon_barra_sair">
        <button onclick="sair()">
          <img src="assets/img/icon_sair.svg" alt="" />
          SAIR
        </button>
      </div>
    </div>

    <section class="conteudo">
      <header>
        <div class="pesquisar-placa">
          <input
            type="text"
            id="input_placa"
            placeholder="pesquisar funcionario/placa..."
            oninput="pesquisaFunc()"
          />
          <div>
            <img src="assets/img/lupa.svg" alt="" />
          </div>

          <!-- essa div é display none, com o oninput ela aparece -->
          <div
            class="resultado_pesquisa"
            style="display: none"
            id="div_resultado_pesquisa"
          >
            <!-- div com += -->
            <div class="info_funcionarios">
              <img src="" alt="" />
              <div class="informacoes_func">
                <div class="nome">nome do funcionario</div>
                <div class="info_veiculo">
                  <div class="placa">veículo: CXPT-2EW3</div>
                  <div class="tipo_veiculo">caminhão: Fiat Ducato</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="user_perfil" id="div_userPerfil">
          <div id="infos-user">
            <h3>Roberta Silva</h3>
            <h4>roberta@therm.com</h4>
          </div>
          <img src="assets/imagens de perfil/perfil_anonimo.jpeg" alt="" />
        </div>
      </header>

      <div class="cards">
        <div class="card-notificacao">
          <div class="titulo">Notificações recentes</div>
          <div class="alerta_exibir">
            <div class="notificacao-alerta">
              <div class="alerta_img">
                <img src="assets/img/alerta_vermelho.svg" alt="" />
              </div>
              <div class="alerta_info">
                <div class="status_alerta">Temperatura fora dos limites</div>
                <div class="alerta_veiculo">Placa veículo: ABC1D23</div>
                <div class="alerta_data">08/05/2025, 22:11</div>
              </div>
            </div>
          </div>
        </div>

        <div class="card-notificacao">
          <div class="titulo">Falhas nos sensores</div>
          <div class="alerta_exibirSensor" id="div_alerta_exibirSensor">
            <!-- <div class="notificacao-alertaSensor">
                        <div class="statusSensor">
                            <div class="bolinha_status"></div>
                            <div class="status">
                                ATIVO
                            </div>
                        </div>

                        <div class="infoSensor1">
                            <div class="sensor_imgFunc">
                                <img src="" alt="">
                            </div>
                            <div class="subInfoSensor">
                                <div class="sensorNomeFunc">
                                    nome do funcionario
                                </div>
                                <div class="sensorVeiculo">
                                    veículo: CXPT-2EW3
                                </div>
                                <div class="sensorVeiculoTipo">
                                    caminhão: Fiat Ducato
                                </div>
                            </div>
                        </div>

                        <div class="infoSensor2">

                            <div class="sensorStatus">
                                STATUS: Exige manutenção
                            </div>
                            <div class="infoSensor3">
                                <div class="subInfoSensor1">
                                    <div>
                                        Umidade superior
                                    </div>
                                    <div>
                                        Umidade inferior
                                    </div>
                                    <div>
                                        Temperatura superior
                                    </div>
                                    <div>
                                        Temperatura inferior
                                    </div>
                                </div>

                                <div class="botaoChamado">
                                    <button onclick="chamado()">
                                        chamado
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div> -->
          </div>
        </div>

        <div class="card-notificacaoFrota">
          <div class="titulo_frota">
            Status da frota
            <div class="frotaImg">
              <img src="assets/img/frotaIcon.svg" alt="" />
            </div>
          </div>

          <div class="frota_exibir" id="div_cardFrota">
            <div>Alertas: 0</div>
          </div>

          <div class="frotaStatus">
            Atenção necessária
            <img src="assets/img/alerta_amarelo.svg" alt="" />
          </div>
        </div>
      </div>

      <div class="veiculosEmpresa">
        <div class="tituloVeiculoEmpresa">VEÍCULOS DA EMPRESA</div>
        <div class="exibirCards" id="div_exibirCards_veiculos">
          <!-- <div class="cardVeiculos">
                    <div class="front">
                        <div class="statusVeiculo">
                            <div class="bolinha_status"></div>
                            <div class="status">
                                ATIVO
                            </div>
                        </div>

                        <div class="infoVeiculo1">
                            <div class="Veiculo_imgFunc">
                                <img src="" alt="">
                            </div>
                            <div class="subInfoVeiculo">
                                <div class="VeiculoNomeFunc">
                                    nome do funcionario
                                </div>
                                <div class="Veiculo">
                                    veículo: CXPT-2EW3
                                </div>
                                <div class="VeiculoTipo">
                                    caminhão: Fiat Ducato
                                </div>
                            </div>
                        </div>

                        <div class="infoVeiculo2">
                            <div>
                                media temperatura:
                            </div>
                            <div>
                                media umidade:
                            </div>
                        </div>
                    </div>

                    <div class="back">
                        <div class="statusVeiculo">
                            <div class="bolinha_status"></div>
                            <div class="status">
                                ATIVO
                            </div>
                        </div>

                        <div class="infoVeiculo1">
                            <div class="Veiculo_imgFunc">
                                <img src="" alt="">
                            </div>
                            <div class="subInfoVeiculo">
                                <div class="VeiculoNomeFunc">
                                    nome do funcionario
                                </div>
                                <div class="Veiculo">
                                    veículo: CXPT-2EW3
                                </div>
                                <div class="VeiculoTipo">
                                    caminhão: Fiat Ducato
                                </div>
                            </div>
                        </div>

                        <div class="infoVeiculo2">
                            <div class="botao_acessar">
                                <button onclick="acessar()">
                                    acessar
                                </button>
                            </div>
                        </div>

                    </div>
                </div> -->
        </div>
      </div>
    </section>
  </body>
</html>

<script>
  var idUsuario = sessionStorage.ID_USUARIO;
  var nomeUsuario = sessionStorage.NOME_USUARIO;
  var emailUsuario = sessionStorage.EMAIL_USUARIO;
  var fotoPerfil = sessionStorage.FOTO_PERFIL;

  window.onload = function () {
    console.log(nomeUsuario);
    div_userPerfil.innerHTML = `
            <div id="infos-user">
                <h3>${nomeUsuario}</h3>
                <h4>${emailUsuario}</h4>
            </div>
            <img src="assets/imagens de perfil/${fotoPerfil}" alt="">`;

    listarFrota();
    alertaSensor();
    veiculosEmpresa();
  };

  function listarFrota() {
    fetch(`dashboard/listarFrota/${idUsuario}`)
      .then((res) => res.json())
      .then((qtdVeiculos) => {
        console.log(qtdVeiculos[0]);
        var qtd = qtdVeiculos[0].qtdVeiculo;

        div_cardFrota.innerHTML = `
                <div>
                    Total: ${qtd}
                </div>`;

        fetch(`dashboard/listarVeiculosEmRota/${idUsuario}`)
          .then((res) => res.json())
          .then((qtdVeiculosRota) => {
            var veiculosEmRota = qtdVeiculosRota[0].veiculosEmRota;

            console.log(veiculosEmRota);

            div_cardFrota.innerHTML += `
                    <div>
                        Veículos com sensores ativados: ${veiculosEmRota}
                    </div>`;
          });
      });
  }

  function pesquisaFunc() {
    var conteudo_pesquisa = input_placa.value;

    if (conteudo_pesquisa === "") {
      div_resultado_pesquisa.style.display = "none";
    } else {
      div_resultado_pesquisa.style.display = "flex";

      fetch(`dashboard/barraPesquisa/${idUsuario}/${conteudo_pesquisa}`)
        .then((res) => res.json())
        .then((dados_pesquisa) => {
          div_resultado_pesquisa.innerHTML = "";

          for (let i = 0; i < dados_pesquisa.length; i++) {
            let dados = dados_pesquisa[i];

            var imagemFunc = dados.imagemPerfil_funcionario;
            var idFuncionario = dados.idFuncionario;
            var nomeFuncionario = dados.nomeFuncionario;
            var idVeiculo = dados.idVeiculo;
            var placaVeiculo = dados.placaVeiculo;
            var modeloVeiculo = dados.modelo;

            div_resultado_pesquisa.innerHTML += `
                        <div class="info_funcionarios">
                        <img src="assets/imagens de perfil/${imagemFunc}" alt="">
                        <div class="informacoes_func">
                            <div class="nome">
                                ${nomeFuncionario}
                            </div>
                                <div class="info_veiculo">
                                    <div class="placa">
                                        veículo: ${placaVeiculo}
                                    </div>
                                    <div class="tipo_veiculo">
                                        caminhão: ${modeloVeiculo}
                                    </div>
                                </div>
                            </div>
                        </div>`;
          }
        });
    }
  }

  var lista_veiculos = [];
  function alertaSensor() {
    fetch(`/dashboard/alertaSensor/veiculosRota/${idUsuario}`)
      .then((res) => res.json())
      .then((qtdVeiculosRota) => {
        if (qtdVeiculosRota.length > 0) {
          console.log(`Esse é alertaSensor: ${qtdVeiculosRota[0].idVeiculo}`);

          for (let i = 0; i < qtdVeiculosRota.length; i++) {
            let idVeiculo = qtdVeiculosRota[i].idVeiculo;
            lista_veiculos.push(idVeiculo);

            fetch(`/dashboard/alertaSensor/defeitoSensorRota/${idVeiculo}`)
              .then((res) => res.json())
              .then((sensoresRotaDefeito) => {
                console.log(sensoresRotaDefeito);

                for (let j = 0; j < sensoresRotaDefeito.length; j++) {
                  let statusCase = sensoresRotaDefeito[j].statusSensorCase;

                  if (statusCase === "COM DEFEITO") {
                    fetch(`dashboard/alertaSensor/infoMotorista/${idVeiculo}`)
                      .then((res) => res.json())
                      .then((dadosFunc) => {
                        if (dadosFunc.length > 0) {
                          let nomeFuncionario = dadosFunc[0].nomeFuncionario;
                          let imagemPerfil_funcionario =
                            dadosFunc[0].imagemPerfil_funcionario;
                          let placaVeiculo = dadosFunc[0].placaVeiculo;
                          let modelo = dadosFunc[0].modelo;
                          let mensagem = ``;
                          let mensagem_status_sensor = ``;

                          mensagem += `
                                                <div class="notificacao-alertaSensor">
                                                    <div class="statusSensor">
                                                        <div class="bolinha_status"></div>
                                                        <div class="status">
                                                            SENSOR ATIVADO
                                                        </div>
                                                    </div>
                                                
                                                    <div class="infoSensor1">
                                                        <div class="sensor_imgFunc">
                                                            <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                        </div>
                                                        <div class="subInfoSensor">
                                                            <div class="sensorNomeFunc">
                                                                ${nomeFuncionario}
                                                            </div>
                                                            <div class="sensorVeiculo">
                                                                veículo: ${placaVeiculo}
                                                            </div>
                                                            <div class="sensorVeiculoTipo">
                                                                caminhão: ${modelo}
                                                            </div>
                                                        </div>
                                                    </div>`;

                          for (let k = 0; k < sensoresRotaDefeito.length; k++) {
                            let localizacao =
                              sensoresRotaDefeito[k].localizacao;
                            let status = sensoresRotaDefeito[k].statusSensor;
                            let idSensor = sensoresRotaDefeito[k].idSensor;
                            let statusCaseSub =
                              sensoresRotaDefeito[k].statusSensorCase;

                            if (statusCaseSub === "COM DEFEITO") {
                              mensagem_status_sensor += `
                                                        <div style="color: red;">
                                                            ${localizacao}: ${status}
                                                        </div>`;

                              fetch(
                                `/dashboard/alertaSensor/statusSensor/defeito`,
                                {
                                  method: "POST",
                                  headers: {
                                    "Content-Type": "application/json",
                                  },
                                  body: JSON.stringify({
                                    idSensorServer: idSensor,
                                  }),
                                }
                              )
                                .then(function (resposta) {
                                  console.log("resposta: ", resposta);
                                  if (resposta.ok) {
                                    console.log(
                                      `Alteração do status do sensor concluída`
                                    );
                                  } else {
                                    throw "Erro ao alterar status do sensor";
                                  }
                                })
                                .catch(function (resposta) {
                                  console.log(`#ERRO: ${resposta}`);
                                });
                            } else if (status === "ATIVO") {
                              mensagem_status_sensor += `
                                                        <div style="color: green;">
                                                            ${localizacao}: ${status}
                                                        </div>`;
                            } else {
                              mensagem_status_sensor += `
                                                        <div style="color: rgb(245, 197, 51);">
                                                            ${localizacao}: ${status}
                                                        </div>`;
                            }
                          }

                          div_alerta_exibirSensor.innerHTML += `
                                                ${mensagem}
                                                    <div class="infoSensor2">
                                                        <div class="sensorStatus">
                                                            STATUS: Exige manutenção
                                                        </div>
                                                        <div class="infoSensor3">
                                                            <div class="subInfoSensor1">
                                                                ${mensagem_status_sensor}
                                                            </div>
                                                        
                                                            <div class="botaoChamado">
                                                                <button onclick="chamado()">
                                                                    chamado
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>`;
                        }
                      });

                    break;
                  }
                }
              });
          }
        }
        alertaSensorDesativado();
      });
  }

  function alertaSensorDesativado() {
    fetch(`/dashboard/alertaSensor/listarVeiculos/${idUsuario}`)
      .then((res) => res.json())
      .then((listaDeVeiculos) => {
        for (let i = 0; i < listaDeVeiculos.length; i++) {
          let veiculo = listaDeVeiculos[i].idVeiculo;

          if (lista_veiculos.includes(veiculo) === false) {
            fetch(`/dashboard/alertaSensor/listarSensoresDefeito/${veiculo}`)
              .then((res) => res.json())
              .then((sensorListaVeiculos) => {
                for (let j = 0; j < sensorListaVeiculos.length; j++) {
                  let statusDoSensor = sensorListaVeiculos[j].statusSensor;

                  if (statusDoSensor != "ATIVO") {
                    fetch(`dashboard/alertaSensor/infoMotorista/${veiculo}`)
                      .then((res) => res.json())
                      .then((dadosFunc) => {
                        if (dadosFunc.length > 0) {
                          let nomeFuncionario = dadosFunc[0].nomeFuncionario;
                          let imagemPerfil_funcionario =
                            dadosFunc[0].imagemPerfil_funcionario;
                          let placaVeiculo = dadosFunc[0].placaVeiculo;
                          let modelo = dadosFunc[0].modelo;
                          let mensagem = ``;
                          let mensagem_status_sensor = ``;

                          mensagem += `
                                                <div class="notificacao-alertaSensor">
                                                    <div class="statusSensor">
                                                        <div class="bolinha_status_defeito"></div>
                                                        <div class="status">
                                                            SENSOR DESATIVADO
                                                        </div>
                                                    </div>
                                                
                                                    <div class="infoSensor1">
                                                        <div class="sensor_imgFunc">
                                                            <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                        </div>
                                                        <div class="subInfoSensor">
                                                            <div class="sensorNomeFunc">
                                                                ${nomeFuncionario}
                                                            </div>
                                                            <div class="sensorVeiculo">
                                                                veículo: ${placaVeiculo}
                                                            </div>
                                                            <div class="sensorVeiculoTipo">
                                                                caminhão: ${modelo}
                                                            </div>
                                                        </div>
                                                    </div>`;

                          for (let k = 0; k < sensorListaVeiculos.length; k++) {
                            let localizacao =
                              sensorListaVeiculos[k].localizacao;
                            let status = sensorListaVeiculos[k].statusSensor;

                            if (status === "MANUTENCAO") {
                              mensagem_status_sensor += `
                                                        <div style="color: red;">
                                                            ${localizacao}: ${status}
                                                        </div>`;
                            } else {
                              mensagem_status_sensor += `
                                                        <div style="color: green;">
                                                            ${localizacao}: ${status}
                                                        </div>`;
                            }
                          }

                          div_alerta_exibirSensor.innerHTML += `
                                                ${mensagem}
                                                    <div class="infoSensor2">
                                                        <div class="sensorStatus">
                                                            STATUS: Exige manutenção
                                                        </div>
                                                        <div class="infoSensor3">
                                                            <div class="subInfoSensor1">
                                                                ${mensagem_status_sensor}
                                                            </div>
                                                        
                                                            <div class="botaoChamado">
                                                                <button onclick="chamado()">
                                                                    chamado
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>`;
                        }
                      });

                    break;
                  }
                }
              });
          }
        }
      });
  }

  var lista_veiculos_card = [];
  function veiculosEmpresa() {
    fetch(`/dashboard/alertaSensor/veiculosRota/${idUsuario}`)
      .then((res) => res.json())
      .then((qtdVeiculosRota) => {
        if (qtdVeiculosRota.length > 0) {
          console.log(
            `Esse é o idVeiculo ROTA: ${qtdVeiculosRota[0].idVeiculo}`
          );

          for (let i = 0; i < qtdVeiculosRota.length; i++) {
            let idVeiculo = qtdVeiculosRota[i].idVeiculo;
            lista_veiculos_card.push(idVeiculo);

            fetch(`dashboard/alertaSensor/infoMotorista/${idVeiculo}`)
              .then((res) => res.json())
              .then((dadosFunc) => {
                var mensagem = "";
                if (dadosFunc.length > 0) {
                  let nomeFuncionario = dadosFunc[0].nomeFuncionario;
                  let imagemPerfil_funcionario =
                    dadosFunc[0].imagemPerfil_funcionario;
                  let placaVeiculo = dadosFunc[0].placaVeiculo;
                  let modelo = dadosFunc[0].modelo;
                  let idFuncionario = dadosFunc[0].idFuncionario;

                  mensagem += `
                                        <div class="cardVeiculos">
                                            <div class="front">
                                                <div class="statusVeiculo">
                                                    <div class="bolinha_status"></div>
                                                    <div class="status">
                                                        ATIVO
                                                    </div>
                                                </div>
                                            
                                                <div class="infoVeiculo1">
                                                    <div class="Veiculo_imgFunc">
                                                        <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                    </div>
                                                    <div class="subInfoVeiculo">
                                                        <div class="VeiculoNomeFunc">
                                                            ${nomeFuncionario}
                                                        </div>
                                                        <div class="Veiculo">
                                                            veículo: ${placaVeiculo}
                                                        </div>
                                                        <div class="VeiculoTipo">
                                                            caminhão: ${modelo}
                                                        </div>
                                                    </div>
                                                </div>`;

                  fetch(`/dashboard/veiculos/media/${idVeiculo}`)
                    .then((res) => res.json())
                    .then((media_veiculos) => {
                      console.log(media_veiculos);
                      let idVeiculo = media_veiculos[0].idVeiculo;

                      let media_temperatura = Number(
                        media_veiculos[0].media_temperatura
                      ).toFixed(2);
                      let media_umidade = Number(
                        media_veiculos[0].media_umidade
                      ).toFixed(2);
                      let dataOriginal = new Date(
                        media_veiculos[0].data_leitura
                      );
                      let data = dataOriginal.toLocaleDateString("pt-BR", {
                        timeZone: "America/Sao_Paulo",
                      });

                      mensagem += `                                            
                                                        <div class="infoVeiculo2">
                                                            <div class="cardVeiculo_titulo">
                                                                DATA: ${data}    
                                                            </div>
                                                            <div>
                                                                media temperatura: ${media_temperatura}
                                                            </div>
                                                            <div>
                                                                media umidade: ${media_umidade}
                                                            </div>
                                                        </div>
                                                    </div>
                                                
                                                    <div class="back">
                                                        <div class="statusVeiculo">
                                                            <div class="bolinha_status"></div>
                                                            <div class="status">
                                                                SENSOR ATIVO
                                                            </div>
                                                        </div>
                                                    
                                                        <div class="infoVeiculo1">
                                                            <div class="Veiculo_imgFunc">
                                                                <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                            </div>
                                                            <div class="subInfoVeiculo">
                                                                <div class="VeiculoNomeFunc">
                                                                    ${nomeFuncionario}
                                                                </div>
                                                                <div class="Veiculo">
                                                                    veículo: ${placaVeiculo}
                                                                </div>
                                                                <div class="VeiculoTipo">
                                                                    caminhão: ${modelo}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    
                                                        <div class="infoVeiculo2">
                                                            <div class="botao_acessar">
                                                                <button onclick="acessar(${idFuncionario}, ${idVeiculo})">
                                                                    acessar
                                                                </button>
                                                            </div>
                                                        </div>
                                                    
                                                    </div>
                                                </div>`;

                      div_exibirCards_veiculos.innerHTML += mensagem;
                    });
                }
              });
          }
        }
        veiculoEmpresaDesativado();
      });
  }

  function veiculoEmpresaDesativado() {
    fetch(`/dashboard/alertaSensor/listarVeiculos/${idUsuario}`)
      .then((res) => res.json())
      .then((listaDeVeiculos) => {
        for (let i = 0; i < listaDeVeiculos.length; i++) {
          let veiculo = listaDeVeiculos[i].idVeiculo;

          if (lista_veiculos_card.includes(veiculo) === false) {
            fetch(`dashboard/alertaSensor/infoMotorista/${veiculo}`)
              .then((res) => res.json())
              .then((dadosFunc) => {
                var mensagem = "";
                if (dadosFunc.length > 0) {
                  let nomeFuncionario = dadosFunc[0].nomeFuncionario;
                  let imagemPerfil_funcionario =
                    dadosFunc[0].imagemPerfil_funcionario;
                  let placaVeiculo = dadosFunc[0].placaVeiculo;
                  let modelo = dadosFunc[0].modelo;
                  let idFuncionario = dadosFunc[0].idFuncionario;

                  mensagem += `
                                        <div class="cardVeiculos">
                                            <div class="front">
                                                <div class="statusVeiculo">
                                                    <div class="bolinha_status_defeito"></div>
                                                    <div class="status">
                                                        SENSOR DESATIVADO   
                                                    </div>
                                                </div>
                                            
                                                <div class="infoVeiculo1">
                                                    <div class="Veiculo_imgFunc">
                                                        <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                    </div>
                                                    <div class="subInfoVeiculo">
                                                        <div class="VeiculoNomeFunc">
                                                            ${nomeFuncionario}
                                                        </div>
                                                        <div class="Veiculo">
                                                            veículo: ${placaVeiculo}
                                                        </div>
                                                        <div class="VeiculoTipo">
                                                            caminhão: ${modelo}
                                                        </div>
                                                    </div>
                                                </div>`;

                  fetch(`/dashboard/veiculos/media/${veiculo}`)
                    .then((res) => res.json())
                    .then((media_veiculos) => {
                      console.log(media_veiculos);
                      let idVeiculo = media_veiculos[0].idVeiculo;
                      let media_temperatura = Number(
                        media_veiculos[0].media_temperatura
                      ).toFixed(2);
                      let media_umidade = Number(
                        media_veiculos[0].media_umidade
                      ).toFixed(2);
                      let dataOriginal = new Date(
                        media_veiculos[0].data_leitura
                      );
                      let data = dataOriginal.toLocaleDateString("pt-BR", {
                        timeZone: "America/Sao_Paulo",
                      });

                      mensagem += `                                            
                                                        <div class="infoVeiculo2">
                                                            <div class="cardVeiculo_titulo">
                                                                DATA: ${data}    
                                                            </div>
                                                            <div>
                                                                media temperatura: ${media_temperatura}
                                                            </div>
                                                            <div>
                                                                media umidade: ${media_umidade}
                                                            </div>
                                                        </div>
                                                    </div>
                                                
                                                    <div class="back">
                                                        <div class="statusVeiculo">
                                                            <div class="bolinha_status_defeito"></div>
                                                            <div class="status">
                                                                SENSOR DESATIVADO
                                                            </div>
                                                        </div>
                                                    
                                                        <div class="infoVeiculo1">
                                                            <div class="Veiculo_imgFunc">
                                                                <img src="assets/imagens de perfil/${imagemPerfil_funcionario}" alt="">
                                                            </div>
                                                            <div class="subInfoVeiculo">
                                                                <div class="VeiculoNomeFunc">
                                                                    ${nomeFuncionario}
                                                                </div>
                                                                <div class="Veiculo">
                                                                    veículo: ${placaVeiculo}
                                                                </div>
                                                                <div class="VeiculoTipo">
                                                                    caminhão: ${modelo}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    
                                                        <div class="infoVeiculo2">
                                                            <div class="botao_acessar">
                                                                <button onclick="acessar(${idFuncionario}, ${idVeiculo})">
                                                                    acessar
                                                                </button>
                                                            </div>
                                                        </div>
                                                    
                                                    </div>
                                                </div>`;

                      div_exibirCards_veiculos.innerHTML += mensagem;
                    });
                }
              });
          }
        }
      });
  }

  function acessar(idFuncionario, idVeiculo) {
    if (!idFuncionario || !idVeiculo){
        console.log("Erro ao acessor funcionario em especifico")
    }else{
        sessionStorage.ID_SELECAO_FUNCIONARIO = idFuncionario;
        sessionStorage.ID_SELECAO_VEICULO = idVeiculo;
        window.location = "dashboard.html";
    }
  }
</script>
